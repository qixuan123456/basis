# XDAG Android Wallet
 
这个XDAG钱包基于XDAG的C实现，是一个Android钱包。


##  项目结构

将XDAG的C版本进行裁剪，移植到Android中。由Android来设计界面，核心部分是裁剪后的XDAG的C版本。C里边包括钱包公私钥生成、地址、交易块生成、网络。UI界面通过JNI与XDAG的C实现进行交互。

## 工作流程

先通过secp256k1在本地生成钱包，在通过公私钥生成第一个地址块（以后的交易地址），将地址块发给矿池，矿池接收并且上链后这个地址才可以使用(导致第一次使用钱包会很慢)。
网络部分包括与矿池的连接和区块浏览器的连接，钱包以矿工的身份连接矿池，与矿池进行交互，通过区块浏览器查询交易记录。
矿池每隔10秒给钱包发送一次余额，钱包每一秒刷新一次状态（钱包的余额是被动接收的，而不是主动查询得来的）。矿池定期给钱包发送挖矿任务，矿工每个任务计算一次，并当作最小值发送给矿池，以此来维持与矿池的连接。

## 功能

目前只有三个功能：发送交易、接收余额和查询交易记录。

### 发送交易

UI层将输入的地址、XDAG数量、remark传递到C里，然后将地址进行解码、XDAG进行转换，写进交易块，填入输入地址及对应的公钥，然后进行签名。将最终的交易块发送给矿池。

### 接收余额

钱包与矿池建立连接后，矿池每隔十秒给钱包发送一次对应地址的余额。

### 查询交易记录

钱包通过调用区块浏览器的API接口将接收到的交易记录显示在界面上。

